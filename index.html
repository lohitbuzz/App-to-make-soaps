<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lohit SOAP App v1.6</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div>
      <h1>Lohit SOAP App v1.6</h1>
      <span>Appointment ¬∑ Surgery ¬∑ Free-form ¬∑ Toolbox Lite</span>
    </div>
    <div>
      <span>Privacy: Local-first ¬∑ Over-redact by default</span>
    </div>
  </header>

  <main>
    <!-- Top controls -->
    <div class="card">
      <div class="tabs">
        <button class="tab active" data-tab="appointment">Appointment</button>
        <button class="tab" data-tab="surgery">Surgery</button>
        <button class="tab" data-tab="freeform">Free-form / Consult</button>
        <button class="tab" data-tab="toolbox">Toolbox Lite</button>
      </div>

      <div class="row">
        <div class="field">
          <label for="caseLabel">Case label / Patient name (optional)</label>
          <input type="text" id="caseLabel" placeholder="e.g., Milo dental COHAT, 8y MN DSH">
        </div>
        <div class="field">
          <label for="accuracyMode">Mode</label>
          <select id="accuracyMode">
            <option value="help">Help Me (safe assumptions)</option>
            <option value="strict">Strict (no guessing)</option>
          </select>
        </div>
      </div>
      <div id="queryStatus" class="status">Ready.</div>
    </div>

    <!-- ------------- APPOINTMENT TAB ------------- -->
    <div id="tab-appointment" class="card tab-panel">
      <h2>Appointment SOAP Inputs</h2>

      <div class="row">
        <div class="field">
          <label for="apptReason">Reason for visit</label>
          <input type="text" id="apptReason" placeholder="e.g., vomiting, itchy ears, annual exam">
        </div>
        <div class="field">
          <label for="apptTPR">TPR (optional, no guessing)</label>
          <input type="text" id="apptTPR" placeholder="e.g., T 38.7¬∞C, P 110, R 28">
        </div>
      </div>

      <div class="field">
        <label for="apptHistory">History / Subjective</label>
        <textarea id="apptHistory" placeholder="Owner-reported history, duration, diet, meds, etc."></textarea>
      </div>

      <div class="field">
        <label for="apptPE">Physical exam (data-only)</label>
        <textarea id="apptPE" placeholder="You can type PE here, or leave blank and let Help Me mode fill safe normals."></textarea>
      </div>

      <div class="field">
        <label for="apptDiagnostics">Diagnostics (data-only)</label>
        <textarea id="apptDiagnostics" placeholder="Lab/rads data, cytology, SNAP tests, etc."></textarea>
      </div>

      <div class="field">
        <label for="apptAssessment">Assessment (optional)</label>
        <textarea id="apptAssessment" placeholder="Problem list, differentials, severity, etc."></textarea>
      </div>

      <div class="field">
        <label for="apptPlan">Plan (optional)</label>
        <textarea id="apptPlan" placeholder="Treatments, diagnostics, follow-up, client communication."></textarea>
      </div>

      <div class="field">
        <label for="apptMeds">Medications dispensed (optional)</label>
        <textarea id="apptMeds" placeholder="Include concentration in brackets if you know it."></textarea>
      </div>

      <button id="generateAppointmentBtn" class="primary">Generate Appointment SOAP</button>
    </div>

    <!-- ------------- SURGERY TAB ------------- -->
    <div id="tab-surgery" class="card tab-panel" style="display:none;">
      <h2>Surgery SOAP Inputs</h2>

      <div class="row">
        <div class="field">
          <label for="sxTemplate">Surgery template</label>
          <select id="sxTemplate">
            <option value="canine-spay">Canine spay</option>
            <option value="canine-neuter">Canine neuter</option>
            <option value="feline-spay">Feline spay</option>
            <option value="feline-neuter">Feline neuter</option>
            <option value="dental-cohat">Dental COHAT</option>
            <option value="mass-removal">Mass removal</option>
            <option value="other">Other / custom</option>
          </select>
        </div>
        <div class="field">
          <label for="sxASA">ASA status</label>
          <input type="text" id="sxASA" placeholder="e.g., ASA II">
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label for="sxETT">ET tube size</label>
          <input type="text" id="sxETT" placeholder="e.g., 7.5 mm cuffed">
        </div>
        <div class="field">
          <label for="sxCatheter">IV catheter</label>
          <input type="text" id="sxCatheter" placeholder="e.g., 22g cephalic, left">
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label for="sxFluidsRate">Fluids rate (ml/kg/hr)</label>
          <input type="text" id="sxFluidsRate" placeholder="e.g., 5 ml/kg/hr dogs, 3 ml/kg/hr cats">
        </div>
        <div class="field checkbox-row">
          <input type="checkbox" id="sxFluidsDeclined">
          <label for="sxFluidsDeclined">Fluids declined</label>
        </div>
      </div>

      <div class="field">
        <label for="sxPremeds">Premedications</label>
        <textarea id="sxPremeds" placeholder="e.g., Dexmedetomidine [0.5 mg/ml] + Hydromorphone [2 mg/ml] IM"></textarea>
      </div>

      <div class="field">
        <label for="sxInduction">Induction / Maintenance</label>
        <textarea id="sxInduction" placeholder="e.g., Propofol [10 mg/ml] to effect, Isoflurane in oxygen"></textarea>
      </div>

      <div class="field">
        <label for="sxIntraOpMeds">Intra-op medications</label>
        <textarea id="sxIntraOpMeds" placeholder="e.g., Meloxicam [5 mg/ml] SQ, Bupivacaine [0.5%] local blocks"></textarea>
      </div>

      <div class="field">
        <label for="sxProcedureNotes">Procedure notes</label>
        <textarea id="sxProcedureNotes" placeholder="Key surgical findings, complications, closure details, etc."></textarea>
      </div>

      <div class="row">
        <div class="field checkbox-row">
          <input type="checkbox" id="sxMonocryl0">
          <label for="sxMonocryl0">0 Monocryl override</label>
        </div>
        <div class="field checkbox-row">
          <input type="checkbox" id="sxMonocryl2_0">
          <label for="sxMonocryl2_0">2-0 Monocryl override</label>
        </div>
        <div class="field checkbox-row">
          <input type="checkbox" id="sxMonocryl3_0">
          <label for="sxMonocryl3_0">3-0 Monocryl override</label>
        </div>
      </div>

      <div class="field">
        <label for="sxTPR">TPR / intra-op notes (optional)</label>
        <textarea id="sxTPR"></textarea>
      </div>

      <div class="field">
        <label for="sxDurations">Anesthesia / surgery durations (optional)</label>
        <textarea id="sxDurations" placeholder="Only if both start & end times known; otherwise leave blank."></textarea>
      </div>

      <button id="generateSurgeryBtn" class="primary">Generate Surgery SOAP</button>
    </div>

    <!-- ------------- FREE-FORM / CONSULT TAB ------------- -->
    <div id="tab-freeform" class="card tab-panel" style="display:none;">
      <h2>Free-form / Consult</h2>
      <div class="field">
        <label for="consultInput">Describe your question or paste any text/images summary</label>
        <textarea id="consultInput" placeholder="e.g., 8y MN DSH, chronic vomiting, normal labs so far... What next?"></textarea>
      </div>
      <button id="runConsultBtn" class="primary">Run consult</button>

      <div id="consultOutputSection" class="output-section" style="display:none;">
        <div class="section-box">
          <div class="section-header">
            <h3>Consult output</h3>
          </div>
          <div id="consultOutput" class="section-body"></div>
        </div>
      </div>
    </div>

    <!-- ------------- TOOLBOX LITE TAB ------------- -->
    <div id="tab-toolbox" class="card tab-panel" style="display:none;">
      <h2>Toolbox Lite</h2>

      <div class="inner-card">
        <h3>Bloodwork Helper Lite</h3>
        <div class="field">
          <label for="bwText">Paste CBC/chem/UA text</label>
          <textarea id="bwText" placeholder="Copy/paste the lab report text or values here."></textarea>
        </div>
        <div class="row">
          <div class="field">
            <label for="bwDetail">Detail level</label>
            <select id="bwDetail">
              <option value="short">Short</option>
              <option value="standard">Standard</option>
            </select>
          </div>
        </div>
        <div class="checkbox-row">
          <input type="checkbox" id="bwDiffs">
          <label for="bwDiffs">Include differential list</label>
        </div>
        <div class="checkbox-row">
          <input type="checkbox" id="bwClientFriendly">
          <label for="bwClientFriendly">Add client-friendly summary</label>
        </div>
        <button id="runBwHelperBtn" class="primary">Run Bloodwork Helper</button>

        <div id="bwOutputSection" class="output-section" style="display:none;">
          <div class="section-box">
            <div class="section-header">
              <h3>Bloodwork Helper output</h3>
            </div>
            <div id="bwOutput" class="section-body"></div>
          </div>
        </div>
      </div>

      <hr>

      <div class="inner-card">
        <h3>Email / Client Communication Helper</h3>
        <div class="row">
          <div class="field">
            <label for="emailType">Email type</label>
            <select id="emailType">
              <option value="bloodwork-followup">Bloodwork follow-up</option>
              <option value="dental-estimate">Dental estimate</option>
              <option value="vaccine-reminder">Vaccine reminder</option>
              <option value="general-update">General update</option>
            </select>
          </div>
          <div class="field">
            <label for="emailTimeframe">Timeframe / appointment info</label>
            <input type="text" id="emailTimeframe" placeholder="e.g., 1‚Äì2 weeks, ASAP if worsening">
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label for="emailPetName">Pet name (optional)</label>
            <input type="text" id="emailPetName">
          </div>
          <div class="field">
            <label for="emailOwnerName">Owner name (optional)</label>
            <input type="text" id="emailOwnerName">
          </div>
        </div>
        <div class="field">
          <label for="emailNotes">Extra clinical notes (optional)</label>
          <textarea id="emailNotes"></textarea>
        </div>
        <button id="runEmailHelperBtn" class="primary">Generate email text</button>

        <div id="emailOutputSection" class="output-section" style="display:none;">
          <div class="section-box">
            <div class="section-header">
              <h3>Email body</h3>
            </div>
            <div id="emailOutput" class="section-body"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- ------------- SOAP OUTPUT CARD (shared) ------------- -->
    <div id="soapOutputCard" class="card" style="display:none;">
      <h2>SOAP Output</h2>

      <div class="section-box">
        <div class="section-header">
          <h3>Subjective</h3>
          <button class="secondary" onclick="copySection('Subjective')">Copy</button>
        </div>
        <div id="subjectiveOutput" class="section-body"></div>
      </div>

      <div class="section-box">
        <div class="section-header">
          <h3>Objective</h3>
          <button class="secondary" onclick="copySection('Objective')">Copy</button>
        </div>
        <div id="objectiveOutput" class="section-body"></div>
      </div>

      <div class="section-box">
        <div class="section-header">
          <h3>Assessment</h3>
          <button class="secondary" onclick="copySection('Assessment')">Copy</button>
        </div>
        <div id="assessmentOutput" class="section-body"></div>
      </div>

      <div class="section-box">
        <div class="section-header">
          <h3>Plan</h3>
          <button class="secondary" onclick="copySection('Plan')">Copy</button>
        </div>
        <div id="planOutput" class="section-body"></div>
      </div>

      <div class="section-box">
        <div class="section-header">
          <h3>Medications Dispensed</h3>
          <button class="secondary" onclick="copySection('Medications Dispensed')">Copy</button>
        </div>
        <div id="medsOutput" class="section-body"></div>
      </div>

      <div class="section-box">
        <div class="section-header">
          <h3>Aftercare</h3>
          <button class="secondary" onclick="copySection('Aftercare')">Copy</button>
        </div>
        <div id="aftercareOutput" class="section-body"></div>
      </div>

      <div class="copy-row">
        <button id="copyFullSoapBtn" class="secondary">Copy full SOAP</button>
        <button id="copyPlanMedsAftercareBtn" class="secondary">Copy Plan + Meds + Aftercare</button>
      </div>

      <div id="feedbackBar" class="feedback-bar" style="display:none;">
        <strong>Refine this SOAP?</strong>
        <input id="refineNote" class="refine-input" placeholder="Add missing details (e.g., ET tube 7.5, 22g catheter LR 5 ml/kg/hr)...">
        <button id="refineBtn" class="secondary">Refine with these details</button>
      </div>
    </div>
  </main>

  <!-- Mic bubble -->
  <div id="micBubble" class="mic-bubble">
    <span>üéôÔ∏è</span>
  </div>

  <script src="app.js"></script>
</body>
</html>