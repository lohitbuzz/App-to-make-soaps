<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moksha SOAP App</title>

    <link rel="stylesheet" href="./style.css" />
</head>

<body>

<!-- HEADER -->
<header class="app-header">
    <img src="./logo.png" class="app-logo" alt="Moksha SOAP Logo">
    <h1>Moksha SOAP</h1>
</header>

<!-- GLOBAL STATUS BAR -->
<div id="statusMessage" class="status-bar">Ready.</div>

<!-- TOP TAB BAR -->
<nav class="tab-bar">
    <button id="tabAppointment" class="tab active">Appointment</button>
    <button id="tabSurgery" class="tab">Surgery</button>
    <button id="tabToolbox" class="tab">Toolbox</button>
    <button id="tabConsult" class="tab">Consult</button>
</nav>

<!-- UNIVERSAL UPLOAD AREA -->
<section class="global-upload">
    <h3>Attach Files / Photos (Vision Enabled)</h3>
    <input multiple id="globalFiles" type="file" accept="image/*,application/pdf,audio/*" />
    <p class="helper">These files will be available to SOAP, Toolbox, and Consult.</p>
</section>

<!-- PHONE â†’ DESKTOP RELAY -->
<section class="relay-panel">
    <h3>Phone â†’ Desktop Relay</h3>
    <button id="generateRelayQR">Show Relay QR</button>
    <div id="relayQRContainer" class="qr-hidden"></div>
    <p class="helper">Scan with your phone to send photos, documents, or text directly into the app.</p>
</section>

<!-- VOICE RECORDER (COLLAPSIBLE) -->
<section class="recorder-section">
    <button id="toggleRecorder" class="collapse-btn">ðŸŽ¤ Voice Recorder</button>

    <div id="recorderContent" class="recorder-collapsed">
        <div class="recorder-controls">
            <button id="recordBtn">Record</button>
            <button id="stopBtn">Stop</button>
            <button id="sendToBackendBtn">Send to Backend</button>
            <button id="sendTranscriptBtn">Send Transcript to Input</button>
        </div>

        <textarea id="voiceTranscript" placeholder="Transcript appears here..."></textarea>
    </div>
</section>

<!--------------------------------------------------------->
<!--------------------- APPOINTMENT TAB ------------------->
<!--------------------------------------------------------->

<section id="appointmentSection">

    <h2>Appointment SOAP</h2>

    <label>Reason for Visit</label>
    <textarea id="apptReason"></textarea>

    <label>History</label>
    <textarea id="apptHistory"></textarea>

    <label>Physical Exam</label>
    <textarea id="apptPE"></textarea>

    <label>Diagnostics</label>
    <textarea id="apptDiagnostics"></textarea>

    <label>Assessment Hints</label>
    <textarea id="apptAssessment"></textarea>

    <label>Plan Hints</label>
    <textarea id="apptPlan"></textarea>

    <label>Meds Dispensed</label>
    <textarea id="apptMedsDispensed"></textarea>

    <button id="generateApptBtn" class="generate-btn">Generate SOAP</button>

    <h3>SOAP Output</h3>
    <textarea id="soapOutput"></textarea>

    <label>Refine SOAP</label>
    <textarea id="soapRefine"></textarea>
    <button id="refineSoapBtn">Refine</button>

</section>

<!--------------------------------------------------------->
<!----------------------- SURGERY TAB --------------------->
<!--------------------------------------------------------->

<section id="surgerySection" class="hidden">

    <h2>Surgery SOAP</h2>

    <label>Reason</label>
    <textarea id="sxReason"></textarea>

    <label>History</label>
    <textarea id="sxHistory"></textarea>

    <label>Physical Exam</label>
    <textarea id="sxPE"></textarea>

    <label>Diagnostics</label>
    <textarea id="sxDiagnostics"></textarea>

    <!-- COLLAPSIBLE ANESTHESIA -->
    <button class="collapse-btn" id="toggleAnesthesia">Anesthesia Inputs</button>

    <div id="anesthesiaContent" class="collapsed">
        <h3>Premed Protocol</h3>
        <select id="premedSelect" multiple></select>

        <h3>Induction</h3>
        <select id="inductionSelect" multiple></select>

        <h3>Intra-op Meds</h3>
        <select id="intraopSelect" multiple></select>

        <h3>Post-op Meds</h3>
        <select id="postopSelect" multiple></select>
    </div>

    <label>Procedure Notes</label>
    <textarea id="sxProcedure"></textarea>

    <label>Recovery Notes</label>
    <textarea id="sxRecovery"></textarea>

    <label>Meds Dispensed</label>
    <textarea id="sxMedsDispensed"></textarea>

    <button id="generateSxBtn" class="generate-btn">Generate Surgery SOAP</button>

    <h3>SOAP Output</h3>
    <textarea id="soapOutputSx"></textarea>

    <label>Refine SOAP</label>
    <textarea id="soapRefineSx"></textarea>
    <button id="refineSoapSxBtn">Refine</button>

</section>

<!--------------------------------------------------------->
<!------------------------ TOOLBOX TAB --------------------->
<!--------------------------------------------------------->

<section id="toolboxSection" class="hidden">

    <h2>Toolbox</h2>

    <label>Choose Tool</label>
    <select id="toolSelect">
        <option value="bloodwork">Bloodwork Summary</option>
        <option value="urinalysis">Urinalysis Summary</option>
        <option value="rads">Radiograph Summary</option>
        <option value="weight">Weight Consult</option>
        <option value="free">Free-form Request</option>
    </select>

    <label>Toolbox Input</label>
    <textarea id="toolboxInput"></textarea>

    <button id="toolboxGenerateBtn" class="generate-btn">Generate</button>

    <h3>Toolbox Output</h3>
    <textarea id="toolboxOutput"></textarea>

    <label>Refine</label>
    <textarea id="toolboxRefine"></textarea>
    <button id="toolboxRefineBtn">Refine Output</button>

</section>

<!--------------------------------------------------------->
<!------------------------ CONSULT TAB --------------------->
<!--------------------------------------------------------->

<section id="consultSection" class="hidden">

    <h2>Consult Assistant</h2>

    <label>Ask a Consult Question</label>
    <textarea id="consultInput"></textarea>

    <button id="consultGenerateBtn" class="generate-btn">Ask</button>

    <h3>Consult Output</h3>
    <textarea id="consultOutput"></textarea>

    <label>Refine</label>
    <textarea id="consultRefine"></textarea>
    <button id="consultRefineBtn">Refine Output</button>

</section>

<script src="./app.js"></script>

</body>
</html>