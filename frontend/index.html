<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Lohit SOAP App v1.6.8</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./style.css" />
  <script src="./app.js" defer></script>
</head>

<body>
  <header class="app-header">
    <div>
      <h1>Lohit SOAP App <span class="badge">v1.6.8</span></h1>
      <p class="subtitle">Appointment • Surgery • Toolbox • Consult</p>
    </div>

    <div class="mode-select-wrap">
      <label>Mode:</label>
      <select id="modeSelect">
        <option value="help_me" selected>Help Me</option>
        <option value="strict">Strict</option>
      </select>
    </div>
  </header>

  <!-- Tabs -->
  <nav class="tab-nav">
    <button id="tabAppointment" class="tab-button active">Appointment</button>
    <button id="tabSurgery" class="tab-button">Surgery</button>
    <button id="tabToolbox" class="tab-button">Toolbox</button>
    <button id="tabConsult" class="tab-button">Consult</button>
  </nav>

  <!-- Layout -->
  <main class="layout">

    <!-- LEFT PANE -->
    <section class="left-pane">

      <!-- Attachments -->
      <section class="card">
        <h2>Attachments (Local Only)</h2>
        <p class="help-text">Photos/files stay on your device. Redact microchip / Lab ID first.</p>
        <div class="attachments-row">
          <button class="btn-outline" disabled>Take Photo (soon)</button>
          <button class="btn-outline" disabled>Upload (soon)</button>
        </div>
      </section>

      <!-- Appointment -->
      <section id="appointmentSection" class="card tab-section">
        <h2>Appointment</h2>
        <label class="field"><span>Reason</span><textarea id="appointmentReason"></textarea></label>
        <label class="field"><span>History</span><textarea id="appointmentHistory"></textarea></label>
        <label class="field"><span>PE (findings only)</span><textarea id="appointmentPe"></textarea></label>
        <label class="field"><span>Diagnostics (data-only)</span><textarea id="appointmentDiagnostics"></textarea></label>
        <label class="field"><span>Assessment</span><textarea id="appointmentAssessment"></textarea></label>
        <label class="field"><span>Plan</span><textarea id="appointmentPlan"></textarea></label>
        <label class="field"><span>Meds dispensed</span><textarea id="appointmentMeds"></textarea></label>

        <div class="actions-row">
          <button id="generateAppointmentBtn" class="btn-primary">Generate SOAP</button>
        </div>
      </section>

      <!-- Surgery -->
      <section id="surgerySection" class="card tab-section hidden">
        <h2>Surgery</h2>

        <div class="segmented">
          <button id="surgerySimpleToggle" class="segmented-btn active">Simple</button>
          <button id="surgeryAdvancedToggle" class="segmented-btn">Advanced</button>
        </div>

        <!-- SIMPLE -->
        <div id="surgerySimplePanel">
          <p class="help-text">One notes box. Brain expands with clinic defaults.</p>
          <label class="field"><span>Notes</span><textarea id="surgerySimpleNotes"></textarea></label>
        </div>

        <!-- ADVANCED -->
        <div id="surgeryAdvancedPanel" class="hidden">
          <label class="field"><span>Template</span><input id="surgeryTemplate" type="text"></label>
          <label class="field"><span>Signalment</span><textarea id="surgerySignalment"></textarea></label>
          <label class="field"><span>IV + Fluids</span><textarea id="surgeryIvFluids"></textarea></label>
          <label class="field"><span>Premeds / Induction / Intra-op</span><textarea id="surgeryDrugs"></textarea></label>
          <label class="field"><span>Procedure Notes</span><textarea id="surgeryProcedure"></textarea></label>
          <label class="field"><span>Recovery</span><textarea id="surgeryRecovery"></textarea></label>
          <label class="field"><span>Meds dispensed</span><textarea id="surgeryMeds"></textarea></label>
        </div>

        <div class="actions-row">
          <button id="generateSurgeryBtn" class="btn-primary">Generate SOAP</button>
        </div>
      </section>

      <!-- Toolbox -->
      <section id="toolboxSection" class="card tab-section hidden">
        <h2>Toolbox Lite</h2>
        <p class="help-text">Quick helper for bloodwork blurbs, client emails, notes.</p>
        <label class="field"><span>Input</span><textarea id="toolboxText"></textarea></label>
        <div class="actions-row"><button id="generateToolboxBtn" class="btn-primary">Generate</button></div>
      </section>

      <!-- Consult -->
      <section id="consultSection" class="card tab-section hidden">
        <h2>Consult</h2>
        <p class="help-text">Speak freely — brain responds and may produce SOAP.</p>
        <label class="field"><span>Message</span><textarea id="consultText"></textarea></label>
        <div class="actions-row"><button id="generateConsultBtn" class="btn-primary">Ask</button></div>
      </section>
    </section>

    <!-- RIGHT PANE -->
    <section class="right-pane">
      <section class="card">
        <div class="section-header">
          <h2>Output</h2>
          <button id="copyFullSoapBtn" class="btn-secondary">Copy</button>
        </div>
        <p id="statusMessage" class="status-text">Ready.</p>
        <textarea id="soapOutput" class="soap-output"></textarea>
      </section>

      <div class="developer-link">
        <a href="./feedback.html">Developer Mode</a>
      </div>
    </section>

  </main>
</body>
</html>