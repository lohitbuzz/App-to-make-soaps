<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Moksha SOAP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <img src="logo.PNG" alt="Moksha SOAP" class="logo" />
    <h1 class="app-title">Moksha SOAP</h1>
  </header>

  <nav class="tab-bar">
    <button class="tab-button active" data-tab="appointment">Appointment</button>
    <button class="tab-button" data-tab="surgery">Surgery</button>
    <button class="tab-button" data-tab="toolbox">Toolbox</button>
    <button class="tab-button" data-tab="consult">Consult</button>
  </nav>

  <div id="statusMessage" class="status-line">Ready.</div>

  <!-- ============== ATTACHMENTS (shared) ============== -->
  <section class="card">
    <h2>Attach photos / labs / documents</h2>
    <p class="hint-text">These files will be available to SOAP, Toolbox, and Consult.</p>
    <input
      type="file"
      id="sharedFiles"
      multiple
      accept="image/*,.pdf,.txt,.doc,.docx"
    />
    <p id="fileSummary" class="hint-text"></p>
  </section>

  <!-- ============== APPOINTMENT ============== -->
  <section id="appointmentSection" class="card section-visible">
    <h2>Appointment SOAP</h2>

    <textarea id="apptReason" placeholder="Reason for visit"></textarea>
    <textarea id="apptHistory" placeholder="History"></textarea>
    <textarea id="apptPE" placeholder="Physical Exam (data-only)"></textarea>
    <textarea id="apptDiagnostics" placeholder="Diagnostics (data-only)"></textarea>
    <textarea id="apptAssessmentHints" placeholder="Assessment hints (optional)"></textarea>
    <textarea id="apptPlanHints" placeholder="Plan hints (optional)"></textarea>
    <textarea id="apptMedsHints" placeholder="Meds dispensed hints (optional)"></textarea>

    <button id="generateApptSoapBtn" class="primary-btn">Generate SOAP</button>

    <h3>SOAP Output</h3>
    <textarea id="apptSoapOutput" class="output-box" readonly></textarea>

    <textarea
      id="apptRefineInput"
      class="feedback-box"
      placeholder="Refine / improve SOAP (e.g., 'shorter, more client-friendly')"
    ></textarea>

    <div class="button-row">
      <button id="apptRefineBtn" class="secondary-btn">Refine SOAP</button>
      <button id="apptCopyBtn" class="secondary-btn">Copy SOAP</button>
    </div>

    <details class="recording-panel">
      <summary>üéôÔ∏è Voice notes (tap to expand)</summary>
      <p class="hint-text">
        Use your phone keyboard‚Äôs microphone to dictate notes directly into this box.
      </p>
      <textarea
        id="apptTranscript"
        placeholder="Dictate notes here with your keyboard mic."
      ></textarea>
      <label class="checkbox-line">
        <input type="checkbox" id="useTranscriptForAppt" />
        Include this transcript in SOAP generation
      </label>
    </details>
  </section>

  <!-- ============== SURGERY ============== -->
  <section id="surgerySection" class="card section-hidden">
    <h2>Surgery SOAP</h2>

    <textarea id="sxReason" placeholder="Reason for surgery"></textarea>
    <textarea id="sxHistory" placeholder="Surgical history / pre-op notes"></textarea>
    <textarea id="sxPE" placeholder="Pre-op PE (data-only)"></textarea>
    <textarea id="sxDiagnostics" placeholder="Diagnostics (data-only)"></textarea>

    <details class="collapsible-block">
      <summary>Anesthesia settings</summary>

      <label class="field-label">Premed:</label>
      <select id="sxPremed">
        <option value="">Select premed...</option>
        <option value="TDK 1:1:1:1 (cats)">TDK 1:1:1:1 (cats)</option>
        <option value="Methadone + Midazolam">Methadone + Midazolam</option>
        <option value="Methadone + Dexmedetomidine">Methadone + Dexmedetomidine</option>
        <option value="Hydromorphone + Midazolam">Hydromorphone + Midazolam</option>
        <option value="Hydromorphone + Dexmedetomidine">Hydromorphone + Dexmedetomidine</option>
        <option value="Buprenorphine SR (post-op)">Buprenorphine SR (post-op)</option>
      </select>

      <label class="field-label">Induction:</label>
      <select id="sxInduction">
        <option value="">Select induction...</option>
        <option value="Propofol">Propofol</option>
        <option value="Alfaxan">Alfaxan</option>
        <option value="Ketamine + Diazepam">Ketamine + Diazepam</option>
      </select>

      <label class="field-label">Intra-op meds (optional):</label>
      <textarea id="sxIntraOp" placeholder="CRI, boluses, local blocks, etc."></textarea>

      <label class="field-label">Post-op meds (optional):</label>
      <textarea id="sxPostOp" placeholder="Analgesia, antibiotics, take-home meds."></textarea>
    </details>

    <textarea id="sxProcedureNotes" placeholder="Procedure notes"></textarea>
    <textarea id="sxRecovery" placeholder="Recovery notes"></textarea>
    <textarea id="sxMedsDispensed" placeholder="Meds dispensed (optional)"></textarea>

    <button id="generateSxSoapBtn" class="primary-btn">Generate Surgery SOAP</button>

    <h3>Surgery SOAP Output</h3>
    <textarea id="sxSoapOutput" class="output-box" readonly></textarea>

    <textarea
      id="sxRefineInput"
      class="feedback-box"
      placeholder="Refine surgery SOAP (e.g., 'shorter', 'more detail in Plan')"
    ></textarea>

    <div class="button-row">
      <button id="sxRefineBtn" class="secondary-btn">Refine SOAP</button>
      <button id="sxCopyBtn" class="secondary-btn">Copy SOAP</button>
    </div>
  </section>

  <!-- ============== TOOLBOX ============== -->
  <section id="toolboxSection" class="card section-hidden">
    <h2>Toolbox</h2>

    <label class="field-label">Tool:</label>
    <select id="toolboxMode">
      <option value="bloodwork">Bloodwork Helper Lite</option>
      <option value="email">Client email / communication</option>
      <option value="weight">Weight consult helper</option>
      <option value="handout">Client handout helper</option>
      <option value="free">Free-form</option>
    </select>

    <textarea
      id="toolboxInput"
      placeholder="Paste labs, Covet SOAP, or describe what you want."
    ></textarea>

    <button id="toolboxGenerateBtn" class="primary-btn">Generate toolbox output</button>

    <h3>Toolbox Output</h3>
    <textarea id="toolboxOutput" class="output-box" readonly></textarea>

    <textarea
      id="toolboxRefineInput"
      class="feedback-box"
      placeholder="Refine / adjust toolbox output..."
    ></textarea>
    <div class="button-row">
      <button id="toolboxRefineBtn" class="secondary-btn">Refine output</button>
      <button id="toolboxCopyBtn" class="secondary-btn">Copy toolbox output</button>
    </div>
  </section>

  <!-- ============== CONSULT ============== -->
  <section id="consultSection" class="card section-hidden">
    <h2>Consult</h2>

    <textarea
      id="consultQuestion"
      placeholder="What do you want help with? e.g., chronic diarrhea differentials."
    ></textarea>
    <textarea
      id="consultContext"
      placeholder="Case context: signalment, main problems, key labs, imaging."
    ></textarea>

    <button id="consultGenerateBtn" class="primary-btn">Generate consult</button>

    <h3>Consult Output</h3>
    <textarea id="consultOutput" class="output-box" readonly></textarea>

    <textarea
      id="consultRefineInput"
      class="feedback-box"
      placeholder="Refine consult output (e.g., 'shorter', 'more focus on next steps')."
    ></textarea>
    <div class="button-row">
      <button id="consultRefineBtn" class="secondary-btn">Refine consult</button>
      <button id="consultCopyBtn" class="secondary-btn">Copy consult output</button>
    </div>
  </section>

  <footer class="footer">
    <a href="feedback.html" class="feedback-link">Send app feedback</a>
  </footer>

  <script src="app.js"></script>
</body>
</html>